# Post-Deployment Checklist for GOST Tunnel Manager on PythonAnywhere

This checklist is to help you verify that the GOST Tunnel Manager application is functioning correctly after deployment on PythonAnywhere. Please refer to the `PYTHONANYWHERE_DEPLOYMENT_GUIDE.md` for deployment instructions.

## 1. Access the Application

*   [ ] Can you access the application using your PythonAnywhere URL (e.g., `yourusername.pythonanywhere.com`)?
*   [ ] Does the home page load correctly and display in Chinese (e.g., "欢迎使用GOST隧道管理器")?

## 2. Server Management

*   [ ] Navigate to "添加服务器" (Add Server). Are all UI elements (labels, buttons, messages) in Chinese?
*   [ ] Try adding a new server.
    *   [ ] Does the SSH connection test provide feedback (success or failure)? (You might need a test server you can actually connect to, or use placeholder details and expect a connection failure message).
    *   [ ] If a server is added successfully (after a successful SSH test mock or real connection), is the success message in Chinese (e.g., "服务器“...”添加成功并已验证连接！")?
    *   [ ] If the SSH test fails, is the error message in Chinese (e.g., "无法连接到服务器“...”：...")?
*   [ ] Is the newly added server listed correctly on the "服务器列表" (List Servers) page? Are table headers and other static text in Chinese?
*   [ ] **Database Check (Optional):** Access your PythonAnywhere account via a Bash console. Navigate to your project directory and then into the `instance` folder. Use `sqlite3 default.db` to open the database.
    *   [ ] Run `SELECT * FROM servers;`. Does the `servers` table contain the new server?
    *   [ ] Is the `ssh_password` field for the new server an encrypted string (not plain text)?

## 3. Transit Management

*   [ ] Navigate to "添加中转" (Add Transit). Are UI elements in Chinese (labels, dropdowns, button text, placeholders)?
*   [ ] Select servers from the dropdowns. Do they appear correctly with their names and IPs?
*   [ ] Try adding a new transit configuration using the servers created in step 2.
    *   [ ] If a transit is added successfully, is the success message ("...状态为“待处理”") in Chinese?
    *   [ ] If there's a validation error (e.g., Server A and Server B are the same), is the error message in Chinese?
*   [ ] Is the new transit listed on the "中转列表" (List Transits) page with '待处理' (Pending) status and other details displayed correctly in Chinese where applicable?
*   [ ] **Database Check (Optional):** In the SQLite console, run `SELECT * FROM transits;`. Does the `transits` table contain the new transit rule with the correct foreign keys and other data?

## 4. GOST Configuration Application (Important - Refer to "GOST Limitations" in Deployment Guide)

*   [ ] Go to the "中转列表" (List Transits) page.
*   [ ] Click the "应用所有配置并重启GOST" (Apply All Configurations & Restart GOST) button. You should see a JavaScript confirmation dialog in Chinese.
*   [ ] After confirming, you should see a success message that the configuration file was written: "成功将GOST配置写入..." (in Chinese).
*   [ ] You should then see an **error message** for the GOST restart: "重启GOST服务失败..." (in Chinese). **This is expected behavior on PythonAnywhere** because the web app cannot execute `sudo systemctl`.
*   [ ] **File Check:** On PythonAnywhere (using the file browser or bash console), navigate to `/home/YourUserName/YourProjectDirName/instance/` (replace with your actual path).
    *   [ ] Verify that `gost_config.json` has been created or updated.
    *   [ ] Open the file. Is its content a valid JSON structure reflecting the transit rule(s) you added?
*   [ ] **Status Update:** Check the "中转列表" (List Transits) page or "系统状态" (System Status) page. The status of the transit rule(s) included in the config should now be '错误' (Error) due to the failed restart attempt. This is the expected behavior of the web app under PythonAnywhere's constraints.

## 5. Manual GOST Setup and Testing (User's Responsibility as per Deployment Guide)

This section is about verifying that *you* can make GOST work using the config generated by the web app.

*   [ ] Have you manually installed the GOST binary in your PythonAnywhere account (e.g., in your home directory or project directory)?
*   [ ] Can you manually start a GOST process from a PythonAnywhere Bash console, pointing it to the configuration file generated by the web app? For example:
    ```bash
    /path/to/your/gost -C /home/YourUserName/YourProjectDirName/instance/gost_config.json 
    ```
    (You might need to use `nohup ... &` to keep it running after closing the console, or use a tool like `screen` or `tmux` if allowed/available).
*   [ ] After the web app generates/updates `instance/gost_config.json`, if your GOST process is already running, can you manually restart/reload your GOST process to pick up the new configuration? (This typically involves stopping and restarting the manual GOST process).
*   [ ] **Functional Test:** Does the transit functionality work as expected through your manually managed GOST process? This is the ultimate test of whether the generated configuration is correct and your manual GOST setup is operational.

## 6. Status Display Page

*   [ ] Navigate to the "系统状态" (System Status) page. Does it load correctly and display titles and static text in Chinese?
*   [ ] Does it show the correct server information (e.g., the server added in step 2)?
*   [ ] Does it show the correct transit information, including the '错误' (Error) status for transits after the "Apply Config" attempt?

## 7. Logs

*   [ ] On the PythonAnywhere **Web** tab, check the **Error log** and **Server log** for any application errors that might have occurred during your testing. The `print()` statements in `app.py` (like Fernet key warnings or config path info) might also appear in one of these logs or a console log if you were running the dev server locally before deployment.

## 8. Environment Variables

*   [ ] (Best Effort Check) Confirm that the `FERNET_ENCRYPTION_KEY` you set in the PythonAnywhere **Web** tab's "Environment variables" section is being used.
    *   One way to infer this: If you added a server, and later download the `instance/default.db` SQLite file, you could try to decrypt the `ssh_password` locally using the *exact* Fernet key you set as an environment variable. It should decrypt successfully. If it doesn't, the app might be using a different key (e.g., the default dev key if the env var wasn't set correctly or the app wasn't reloaded after setting it).

This checklist should help ensure your deployed GOST Tunnel Manager is working as intended within the constraints of the PythonAnywhere environment.`POST_DEPLOYMENT_CHECKLIST.md` has been created with the detailed checklist for the user.

This completes the subtask.